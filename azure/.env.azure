# Azure Container Apps Environment Configuration
# This file shows the environment variables used in Azure deployment
# These are set in deploy.sh and don't need to be manually configured

# Database Configuration
POSTGRES_USER=rag_user
POSTGRES_PASSWORD=rag_password  # Change in production!
POSTGRES_DB=rag_database
POSTGRES_HOST=rag-postgres  # Internal service name
POSTGRES_PORT=5432

# PGVector Configuration
PGVECTOR_HOST=rag-pgvector  # Internal service name
PGVECTOR_PORT=5432
PGVECTOR_DB=vector_db

# Neo4j Configuration
NEO4J_AUTH=neo4j/neo4j_password  # Change in production!
NEO4J_HOST=rag-neo4j  # Internal service name
NEO4J_PORT=7687
NEO4J_HTTP_PORT=7474

# Backend Configuration
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000

# Frontend Configuration
FRONTEND_PORT=80  # Nginx serves on port 80

# OpenAI Configuration
# IMPORTANT: Set this before running deploy.sh
# export OPENAI_API_KEY="your-key-here"
OPENAI_API_KEY=  # Set via environment variable
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Document Processing Configuration
CHUNK_SIZE=1200
CHUNK_OVERLAP=400
TOP_K_RESULTS=5

# Storage
STORAGE_PATH=/app/storage

# GraphRAG Settings
GRAPHRAG_ENABLED=true
GRAPHRAG_LLM_MODEL=gpt-4o
GRAPHRAG_EMBEDDING_MODEL=text-embedding-3-large

# Entity Resolution
ENTITY_SIMILARITY_THRESHOLD=0.85
ENABLE_ENTITY_DEDUPLICATION=true

# Elasticsearch Configuration
ELASTICSEARCH_HOST=rag-elasticsearch  # Internal service name
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_INDEX_NAME=rag_documents

# Search Configuration
ENABLE_VECTOR_SEARCH=true
ENABLE_GRAPH_SEARCH=true
ENABLE_FILTER_SEARCH=true
DEFAULT_SEARCH_TOOLS=auto

# Performance Settings
MAX_PERFORMANCE=false

# Memory Management Settings
MEMORY_ENABLED=true
MEMORY_DB_HOST=rag-postgres  # Internal service name
MEMORY_DB_PORT=5432
MEMORY_DB_NAME=rag_database
MEMORY_DB_USER=rag_user
MEMORY_DB_PASSWORD=rag_password  # Change in production!
MEMORY_APPROACH=external_llm
MEMORY_MODEL=gpt-4o-mini

# Redis Configuration
REDIS_HOST=rag-redis  # Internal service name
REDIS_PORT=6379

# Notes for Azure Deployment:
# 1. All *_HOST variables use internal Container App names (e.g., rag-postgres)
# 2. Container Apps in the same environment can communicate using service names
# 3. Only frontend and backend have external ingress enabled
# 4. Databases are only accessible within the Container Apps Environment
# 5. Secrets (API keys, passwords) should be managed via Azure Key Vault in production
